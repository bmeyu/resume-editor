<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½ç®€å†ç¼–è¾‘å™¨ - ä¼˜åŒ–PDFå¯¼å‡º</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #3b82f6;
            --text-dark: #333333;
            --text-light: #666666;
            --bg-light: #f8fafc;
            --border-color: #e2e8f0;
            --toolbar-bg: #ffffff;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --page-color: #ffffff;
        }
        
        [data-theme="dark"] {
            --primary-color: #3b82f6;
            --text-dark: #e2e8f0;
            --text-light: #94a3b8;
            --bg-light: #1e293b;
            --border-color: #334155;
            --toolbar-bg: #0f172a;
            --shadow: 0 4px 12px rgba(0,0,0,0.3);
            --page-color: #0f172a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'PingFang SC', system-ui, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--bg-light);
            transition: background 0.3s;
            padding: 20px;
            min-height: 100vh;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #e4e7eb 100%);
        }
        
        [data-theme="dark"] body {
            background-image: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
        }
        
        /* æ§åˆ¶é¢æ¿æ ·å¼ */
        .control-panel {
            background: var(--toolbar-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .panel-title {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title i {
            font-size: 1.2rem;
        }
        
        .control-group {
            margin-bottom: 25px;
        }
        
        .control-group h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-group h3 i {
            color: var(--primary-color);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
        }
        
        .btn i {
            font-size: 1.1rem;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background: rgba(37, 99, 235, 0.1);
        }
        
        .color-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.active {
            transform: scale(1.15);
            border: 2px solid var(--text-dark);
            box-shadow: 0 0 0 3px var(--primary-color);
        }
        
        .theme-toggle {
            background: var(--toolbar-bg);
            border: 1px solid var(--border-color);
            display: flex;
            border-radius: 50px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .theme-btn {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .theme-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .export-options {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .export-options .btn {
            flex: 1;
        }
        
        /* ç®€å†ç¼–è¾‘åŒºåŸŸ */
        .resume-container {
            background: var(--page-color);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            min-height: 100vh;
            position: relative;
            padding: 20px;
        }
        
        .resume-pages {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .resume-page {
            background: var(--page-color);
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            min-height: 297mm;
            width: 210mm;
            margin: 0 auto;
            padding: 30px;
            box-sizing: border-box;
            page-break-after: always;
        }
        
        .page-indicator {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        /* ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ */
        .photo-container {
            position: absolute;
            top: 40px;
            right: 40px;
            width: 120px;
            height: 150px;
            border: 1px dashed var(--border-color);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: #f9fafb;
            z-index: 10;
        }
        
        [data-theme="dark"] .photo-container {
            background: #1e293b;
        }
        
        .photo-preview {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: cover;
            background-position: center;
        }
        
        .photo-placeholder {
            text-align: center;
            padding: 15px;
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .photo-placeholder i {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        
        .photo-actions {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.5);
            padding: 6px;
            display: flex;
            justify-content: center;
            gap: 10px;
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        
        .photo-container:hover .photo-actions {
            transform: translateY(0);
        }
        
        .photo-btn {
            background: rgba(255,255,255,0.9);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-dark);
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        
        .photo-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        /* ç®€å†å¤´éƒ¨æ ·å¼ */
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-top: 20px;
            position: relative;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 0.25rem;
            color: var(--primary-color);
            outline: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.2s;
            font-weight: bold;
        }
        
        h1:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .job-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 1.5rem;
            outline: none;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .job-title:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .contact {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-top: 0.5rem;
            font-size: 14px;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            outline: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .contact-item:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        /* æ¨¡å—é€šç”¨æ ·å¼ */
        section {
            margin-bottom: 1.8rem;
            padding-bottom: 1.5rem;
        }
        
        h2 {
            font-size: 18px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 6px;
            margin-bottom: 1.2rem;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .add-btn {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary-color);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }
        
        .add-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        /* æ‘˜è¦æ ·å¼ */
        .summary {
            background: rgba(37, 99, 235, 0.05);
            padding: 1.2rem;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            line-height: 1.7;
            min-height: 80px;
            transition: all 0.2s;
        }
        
        .summary:focus {
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
            background: rgba(37, 99, 235, 0.08);
        }
        
        /* æ•™è‚²ç»å†æ ·å¼ */
        .education-item {
            margin-bottom: 1.5rem;
            padding: 1rem;
            transition: all 0.2s;
            position: relative;
            border-left: 3px solid var(--primary-color);
            padding-left: 15px;
        }
        
        .education-item:focus-within {
            background: rgba(37, 99, 235, 0.05);
        }
        
        .edu-header {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 0.3rem;
            gap: 10px;
        }
        
        .school-name {
            font-weight: 600;
            font-size: 16px;
            outline: none;
            padding: 3px 6px;
            border-radius: 4px;
            flex: 1;
        }
        
        .school-name:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .edu-date {
            color: var(--text-light);
            font-size: 14px;
            outline: none;
            padding: 3px 6px;
            border-radius: 4px;
        }
        
        .edu-date:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .degree-row {
            display: flex;
            gap: 15px;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }
        
        .degree-type {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary-color);
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 13px;
        }
        
        .degree {
            font-style: italic;
            color: var(--text-light);
            outline: none;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 15px;
        }
        
        .degree:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .gpa {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--text-light);
            font-size: 14px;
        }
        
        .gpa input {
            width: 60px;
            padding: 3px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            text-align: center;
        }
        
        ul {
            padding-left: 1.5rem;
            margin-top: 0.5rem;
        }
        
        li {
            margin-bottom: 0.5rem;
            position: relative;
            outline: none;
            padding: 3px 8px;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        li:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        li::before {
            content: "â€¢";
            color: var(--primary-color);
            position: absolute;
            left: -1.2rem;
            font-size: 1.2rem;
            top: -0.1rem;
        }
        
        /* ç»å†æ¡ç›®æ ·å¼ */
        .experience-item, .project-item {
            margin-bottom: 1.8rem;
            padding: 1rem;
            transition: all 0.2s;
            position: relative;
            border-left: 3px solid var(--primary-color);
            padding-left: 15px;
        }
        
        .experience-item:focus-within, .project-item:focus-within {
            background: rgba(37, 99, 235, 0.05);
        }
        
        .item-header {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 0.3rem;
            gap: 10px;
        }
        
        .company, .project-name {
            font-weight: 600;
            font-size: 16px;
            outline: none;
            padding: 3px 6px;
            border-radius: 4px;
            flex: 1;
        }
        
        .company:focus, .project-name:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .date {
            color: var(--text-light);
            font-size: 14px;
            outline: none;
            padding: 3px 6px;
            border-radius: 4px;
        }
        
        .date:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        .position {
            font-style: italic;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            outline: none;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 15px;
        }
        
        .position:focus {
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        /* æŠ€èƒ½æ ·å¼ */
        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }
        
        .skill-tag {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 14px;
            outline: none;
            transition: all 0.2s;
        }
        
        .skill-tag:focus {
            background: rgba(37, 99, 235, 0.2);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3);
        }
        
        /* AIæç¤ºåŒºåŸŸ */
        .ai-tips {
            background: rgba(37, 99, 235, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin-top: 1.5rem;
            font-size: 14px;
        }
        
        .ai-tips strong {
            color: var(--primary-color);
        }
        
        .ai-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding: 8px 12px;
            background: rgba(37, 99, 235, 0.05);
            border-radius: 6px;
            cursor: pointer;
        }
        
        .ai-toggle input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(220, 38, 38, 0.1);
            color: #dc2626;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .delete-btn:hover {
            background: #dc2626;
            color: white;
        }
        
        /* å“åº”å¼é€‚é… */
        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .control-panel {
                position: relative;
                top: 0;
            }
            
            .resume-page {
                width: 100%;
                padding: 20px;
                min-height: auto;
            }
        }
        
        @media (max-width: 700px) {
            .resume-content {
                padding: 15px;
            }
            
            .photo-container {
                position: relative;
                top: 0;
                right: 0;
                width: 100px;
                height: 130px;
                margin: 0 auto 15px;
            }
            
            .contact {
                gap: 0.8rem;
                justify-content: flex-start;
                font-size: 13px;
            }
            
            .item-header, .edu-header {
                flex-direction: column;
            }
            
            .date, .edu-date {
                margin-top: 0.2rem;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .job-title {
                font-size: 18px;
            }
        }
        
        /* é€šçŸ¥æ ·å¼ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateX(120%);
            transition: transform 0.3s ease-out;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        /* PDFé€‰é¡¹é¢æ¿ */
        .pdf-options {
            background: rgba(37, 99, 235, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .option-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .option-row label {
            flex: 1;
            font-size: 0.95rem;
        }
        
        .option-row select {
            width: 120px;
            padding: 5px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }
        
        /* åˆ†é¡µæŒ‡ç¤ºå™¨ */
        .page-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .page-indicator-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .page-indicator-btn.active {
            background: var(--primary-color);
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <h2 class="panel-title"><i class="fas fa-tools"></i> ç®€å†ç¼–è¾‘å™¨</h2>
            
            <div class="control-group">
                <h3><i class="fas fa-camera"></i> ç…§ç‰‡ä¸Šä¼ </h3>
                <div class="photo-upload">
                    <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                    <button class="btn" id="uploadPhotoBtn">
                        <i class="fas fa-upload"></i> é€‰æ‹©ç…§ç‰‡
                    </button>
                    <div class="ai-toggle">
                        <input type="checkbox" id="showPhoto" checked>
                        <label for="showPhoto">åœ¨ç®€å†ä¸­æ˜¾ç¤ºç…§ç‰‡</label>
                    </div>
                </div>
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-paint-brush"></i> ä¸»é¢˜é¢œè‰²</h3>
                <div class="color-options">
                    <div class="color-option active" style="background-color: #2563eb;" data-color="#2563eb"></div>
                    <div class="color-option" style="background-color: #0ea5e9;" data-color="#0ea5e9"></div>
                    <div class="color-option" style="background-color: #8b5cf6;" data-color="#8b5cf6"></div>
                    <div class="color-option" style="background-color: #ec4899;" data-color="#ec4899"></div>
                    <div class="color-option" style="background-color: #10b981;" data-color="#10b981"></div>
                    <div class="color-option" style="background-color: #f59e0b;" data-color="#f59e0b"></div>
                </div>
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-moon"></i> é¢œè‰²æ¨¡å¼</h3>
                <div class="theme-toggle">
                    <div class="theme-btn active" data-theme="light">æµ…è‰²æ¨¡å¼</div>
                    <div class="theme-btn" data-theme="dark">æ·±è‰²æ¨¡å¼</div>
                </div>
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-file-export"></i> å¯¼å‡ºé€‰é¡¹</h3>
                <div class="export-options">
                    <button class="btn" id="exportPdf">
                        <i class="fas fa-file-pdf"></i> å¯¼å‡ºPDF
                    </button>
                </div>
                
                <div class="pdf-options">
                    <div class="option-row">
                        <label>PDFç±»å‹ï¼š</label>
                        <select id="pdfType">
                            <option value="text">æ–‡æœ¬å‹ (å°æ–‡ä»¶)</option>
                            <option value="image">å›¾åƒå‹ (åŸæ ·ä¿ç•™)</option>
                        </select>
                    </div>
                    <div class="option-row">
                        <label>ç…§ç‰‡è´¨é‡ï¼š</label>
                        <select id="photoQuality">
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="high">é«˜è´¨é‡</option>
                            <option value="low">ä½è´¨é‡</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-outline" id="saveLocal">
                    <i class="fas fa-save"></i> ä¿å­˜åˆ°æœ¬åœ°
                </button>
                <button class="btn btn-outline" id="loadLocal">
                    <i class="fas fa-folder-open"></i> ä»æœ¬åœ°åŠ è½½
                </button>
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-robot"></i> AIæç¤ºè®¾ç½®</h3>
                <div class="ai-toggle">
                    <input type="checkbox" id="showAiTips" checked>
                    <label for="showAiTips">åœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºAIæç¤º</label>
                </div>
                <p style="color: var(--text-light); font-size: 0.9rem; margin-top: 10px;">
                    <i class="fas fa-info-circle"></i> AIæç¤ºä»…åœ¨ç¼–è¾‘æ—¶å¯è§ï¼Œå¯¼å‡ºPDFæ—¶è‡ªåŠ¨éšè—
                </p>
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-lightbulb"></i> ä½¿ç”¨æç¤º</h3>
                <ul style="color: var(--text-light); padding-left: 20px; font-size: 0.9rem;">
                    <li>æ•™è‚²ç»å†æ˜¯ç®€å†ä¸­<strong>å¿…å¤‡éƒ¨åˆ†</strong>ï¼Œè¯·åŠ¡å¿…å¡«å†™</li>
                    <li>åº”å±Šæ¯•ä¸šç”Ÿåº”å°†æ•™è‚²ç»å†æ”¾åœ¨å·¥ä½œç»å†ä¹‹å‰</li>
                    <li>å·¥ä½œ10å¹´ä»¥ä¸Šå¯ç®€ç•¥æ•™è‚²ç»å†</li>
                    <li>GPAé«˜äº3.0/4.0å»ºè®®å¡«å†™</li>
                    <li>ç›¸å…³è¯¾ç¨‹å’Œè£èª‰å¥–é¡¹å¯å¢å¼ºç«äº‰åŠ›</li>
                </ul>
            </div>
        </div>
        
        <!-- ç®€å†å†…å®¹åŒºåŸŸ -->
        <div class="resume-container" id="resumeContent">
            <div class="resume-pages">
                <div class="resume-page" id="page1">
                    <div class="page-indicator">ç¬¬ 1 é¡µ</div>
                    
                    <div class="photo-container" id="photoContainer">
                        <div class="photo-preview" id="photoPreview">
                            <div class="photo-placeholder">
                                <i class="fas fa-user-circle"></i>
                                <p>ç‚¹å‡»ä¸Šä¼ ç…§ç‰‡</p>
                            </div>
                        </div>
                        <div class="photo-actions">
                            <div class="photo-btn" id="changePhotoBtn">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                            <div class="photo-btn" id="removePhotoBtn">
                                <i class="fas fa-trash-alt"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="resume-content">
                        <header>
                            <h1 contenteditable="true">å¼ æ˜</h1>
                            <div class="job-title" contenteditable="true">é«˜çº§äº§å“ç»ç† | ç”¨æˆ·å¢é•¿æ–¹å‘</div>
                            <div class="contact">
                                <div class="contact-item" contenteditable="true">ğŸ“± 13800138000</div>
                                <div class="contact-item" contenteditable="true">âœ‰ï¸ zhangming@email.com</div>
                                <div class="contact-item" contenteditable="true">ğŸ“ ä¸Šæµ· | åŒ—äº¬</div>
                                <div class="contact-item" contenteditable="true">ğŸ”— portfolio.com/zhangming</div>
                            </div>
                        </header>

                        <section id="summary">
                            <h2>èŒä¸šæ‘˜è¦</h2>
                            <div class="summary" contenteditable="true">
                                5å¹´äº’è”ç½‘äº§å“ç»éªŒï¼Œä¸“æ³¨ç”¨æˆ·å¢é•¿ä¸å•†ä¸šåŒ–è®¾è®¡ã€‚ä¸»å¯¼3æ¬¾ç™¾ä¸‡çº§DAUäº§å“è¿­ä»£ï¼Œæ›¾å®ç°30å¤©æ–°ç”¨æˆ·å¢é•¿120%ï¼Œä»˜è´¹è½¬åŒ–ç‡æå‡18%ã€‚æ“…é•¿æ•°æ®é©±åŠ¨å†³ç­–ä¸è·¨éƒ¨é—¨åä½œï¼Œè·2024å¹´åº¦å…¬å¸åˆ›æ–°å¥–ã€‚
                            </div>
                        </section>

                        <section id="education">
                            <h2>
                                æ•™è‚²ç»å†
                                <button class="add-btn" id="addEducation">+</button>
                            </h2>
                            
                            <div class="education-item">
                                <button class="delete-btn">Ã—</button>
                                <div class="edu-header">
                                    <div class="school-name" contenteditable="true">åŒ—äº¬å¤§å­¦</div>
                                    <div class="edu-date" contenteditable="true">2016å¹´9æœˆ - 2020å¹´6æœˆ</div>
                                </div>
                                <div class="degree-row">
                                    <div class="degree-type">
                                        <i class="fas fa-graduation-cap"></i>
                                        <select class="degree-type-select">
                                            <option>æœ¬ç§‘</option>
                                            <option>ç¡•å£«</option>
                                            <option>åšå£«</option>
                                        </select>
                                    </div>
                                    <div class="degree" contenteditable="true">è®¡ç®—æœºç§‘å­¦</div>
                                    <div class="gpa">
                                        <span>GPA:</span>
                                        <input type="text" value="3.8/4.0">
                                    </div>
                                </div>
                                <ul>
                                    <li contenteditable="true">ä¸»ä¿®è¯¾ç¨‹ï¼šæ•°æ®ç»“æ„ã€ç®—æ³•åˆ†æã€äººå·¥æ™ºèƒ½ã€äº§å“è®¾è®¡</li>
                                    <li contenteditable="true">è£èª‰ï¼šæ ¡çº§ä¼˜ç§€æ¯•ä¸šç”Ÿã€ç§‘æŠ€åˆ›æ–°å¥–å­¦é‡‘</li>
                                </ul>
                            </div>

                            <div class="education-item">
                                <button class="delete-btn">Ã—</button>
                                <div class="edu-header">
                                    <div class="school-name" contenteditable="true">æ¸…åå¤§å­¦</div>
                                    <div class="edu-date" contenteditable="true">2020å¹´9æœˆ - 2022å¹´6æœˆ</div>
                                </div>
                                <div class="degree-row">
                                    <div class="degree-type">
                                        <i class="fas fa-graduation-cap"></i>
                                        <select class="degree-type-select">
                                            <option>æœ¬ç§‘</option>
                                            <option selected>ç¡•å£«</option>
                                            <option>åšå£«</option>
                                        </select>
                                    </div>
                                    <div class="degree" contenteditable="true">å·¥å•†ç®¡ç†</div>
                                    <div class="gpa">
                                        <span>GPA:</span>
                                        <input type="text" value="3.9/4.0">
                                    </div>
                                </div>
                                <ul>
                                    <li contenteditable="true">ä¸»ä¿®è¯¾ç¨‹ï¼šå•†ä¸šåˆ†æã€äº§å“ç®¡ç†ã€å¸‚åœºè¥é”€ã€ç»„ç»‡è¡Œä¸ºå­¦</li>
                                    <li contenteditable="true">è£èª‰ï¼šé™¢é•¿å¥–å­¦é‡‘ã€MBAæ¡ˆä¾‹å¤§èµ›å† å†›</li>
                                </ul>
                            </div>
                        </section>

                        <section id="experience">
                            <h2>
                                å·¥ä½œç»å†
                                <button class="add-btn" id="addExperience">+</button>
                            </h2>
                            
                            <div class="experience-item">
                                <button class="delete-btn">Ã—</button>
                                <div class="item-header">
                                    <div class="company" contenteditable="true">è…¾è®¯ Â· å¾®ä¿¡äº‹ä¸šç¾¤</div>
                                    <div class="date" contenteditable="true">2022å¹´6æœˆ - è‡³ä»Š</div>
                                </div>
                                <div class="position" contenteditable="true">é«˜çº§äº§å“ç»ç†ï¼ˆç”¨æˆ·å¢é•¿ï¼‰</div>
                                <ul>
                                    <li contenteditable="true">é‡æ„æ–°ç”¨æˆ·å¼•å¯¼æµç¨‹ï¼Œé¦–å‘¨ç•™å­˜ç‡æå‡<span class="highlight">32%</span>ï¼Œè·å­£åº¦åˆ›æ–°é¡¹ç›®é‡‘å¥–</li>
                                    <li contenteditable="true">è®¾è®¡ç¤¾äº¤è£‚å˜å¢é•¿æ¨¡å‹ï¼Œ3ä¸ªæœˆå¸¦æ¥<span class="highlight">180ä¸‡</span>æ–°å¢ç”¨æˆ·ï¼Œè·å®¢æˆæœ¬é™ä½<span class="highlight">40%</span></li>
                                    <li contenteditable="true">ä¸»å¯¼ABå®éªŒå¹³å°å‡çº§ï¼Œå®éªŒè¿­ä»£æ•ˆç‡æå‡<span class="highlight">50%</span>ï¼Œæ”¯æŒæ—¥å‡20+å®éªŒå¹¶è¡Œ</li>
                                </ul>
                            </div>

                            <div class="experience-item">
                                <button class="delete-btn">Ã—</button>
                                <div class="item-header">
                                    <div class="company" contenteditable="true">å­—èŠ‚è·³åŠ¨ Â· æŠ–éŸ³ç”µå•†</div>
                                    <div class="date" contenteditable="true">2020å¹´3æœˆ - 2022å¹´5æœˆ</div>
                                </div>
                                <div class="position" contenteditable="true">äº§å“ç»ç†</div>
                                <ul>
                                    <li contenteditable="true">è®¾è®¡ç›´æ’­è´­ç‰©è½¦ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¸‹å•è½¬åŒ–ç‡æå‡<span class="highlight">22%</span>ï¼ŒGMVæœˆå¢<span class="highlight">1.2äº¿</span></li>
                                    <li contenteditable="true">æ­å»ºå•†å®¶æˆé•¿ä½“ç³»ï¼Œä¼˜è´¨å•†å®¶ç•™å­˜ç‡æé«˜<span class="highlight">35%</span></li>
                                </ul>
                            </div>
                        </section>

                        <section id="projects">
                            <h2>
                                å…³é”®é¡¹ç›®
                                <button class="add-btn" id="addProject">+</button>
                            </h2>
                            <div class="project-item">
                                <button class="delete-btn">Ã—</button>
                                <div class="item-header">
                                    <div class="project-name" contenteditable="true">å¾®ä¿¡ã€Œè´­ç‰©åœˆã€ç¤¾äº¤ç”µå•†ä½“ç³»</div>
                                    <div class="date" contenteditable="true">2023å¹´3æœˆ-2023å¹´10æœˆ</div>
                                </div>
                                <ul>
                                    <li contenteditable="true">ä»0åˆ°1è®¾è®¡å¥½å‹æ‹¼å›¢ç³»ç»Ÿï¼Œä¸Šçº¿é¦–æœˆå¸¦åŠ¨<span class="highlight">86ä¸‡</span>ç¬”è®¢å•</li>
                                    <li contenteditable="true">å»ºç«‹UGCå†…å®¹æ¿€åŠ±ä½“ç³»ï¼Œç”¨æˆ·å†…å®¹è´¡çŒ®é‡æå‡<span class="highlight">150%</span></li>
                                </ul>
                            </div>
                        </section>
                    </div>
                </div>
                
                <div class="resume-page" id="page2">
                    <div class="page-indicator">ç¬¬ 2 é¡µ</div>
                    <div class="resume-content">
                        <section id="skills">
                            <h2>
                                æŠ€èƒ½è¯ä¹¦
                                <button class="add-btn" id="addSkill">+</button>
                            </h2>
                            <div class="skills-container">
                                <div class="skill-tag" contenteditable="true">å¢é•¿é»‘å®¢æ–¹æ³•è®º</div>
                                <div class="skill-tag" contenteditable="true">SQL/Pythonæ•°æ®åˆ†æ</div>
                                <div class="skill-tag" contenteditable="true">ç”¨æˆ·è¡Œä¸ºåˆ†æ</div>
                                <div class="skill-tag" contenteditable="true">Axure/Sketch</div>
                                <div class="skill-tag" contenteditable="true">PMPè®¤è¯</div>
                                <div class="skill-tag" contenteditable="true">Google Analytics</div>
                                <div class="skill-tag" contenteditable="true">æ•æ·å¼€å‘</div>
                                <div class="skill-tag" contenteditable="true">ç”¨æˆ·è°ƒç ”</div>
                                <div class="skill-tag" contenteditable="true">A/Bæµ‹è¯•</div>
                                <div class="skill-tag" contenteditable="true">æ•°æ®å¯è§†åŒ–</div>
                                <div class="skill-tag" contenteditable="true">å›¢é˜Ÿç®¡ç†</div>
                                <div class="skill-tag" contenteditable="true">è·¨éƒ¨é—¨åä½œ</div>
                            </div>
                        </section>

                        <section id="languages">
                            <h2>è¯­è¨€èƒ½åŠ›</h2>
                            <div class="skills-container">
                                <div class="skill-tag" contenteditable="true">ä¸­æ–‡ï¼ˆæ¯è¯­ï¼‰</div>
                                <div class="skill-tag" contenteditable="true">è‹±è¯­ï¼ˆä¸“ä¸šå…«çº§ï¼‰</div>
                                <div class="skill-tag" contenteditable="true">æ—¥è¯­ï¼ˆN2ï¼‰</div>
                            </div>
                        </section>

                        <section id="certificates">
                            <h2>ä¸“ä¸šè¯ä¹¦</h2>
                            <ul>
                                <li contenteditable="true">PMPé¡¹ç›®ç®¡ç†ä¸“ä¸šäººå£«è®¤è¯ï¼ˆ2023ï¼‰</li>
                                <li contenteditable="true">Google Analytics é«˜çº§è®¤è¯ï¼ˆ2022ï¼‰</li>
                                <li contenteditable="true">AWSäº‘è®¡ç®—è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆï¼ˆ2021ï¼‰</li>
                                <li contenteditable="true">Scrum Masterè®¤è¯ï¼ˆ2020ï¼‰</li>
                            </ul>
                        </section>

                        <section id="awards">
                            <h2>è£èª‰å¥–é¡¹</h2>
                            <ul>
                                <li contenteditable="true">2024å¹´è…¾è®¯å¹´åº¦åˆ›æ–°å¥–</li>
                                <li contenteditable="true">2023å¹´å¾®ä¿¡äº‹ä¸šéƒ¨æœ€ä½³äº§å“è®¾è®¡å¥–</li>
                                <li contenteditable="true">2022å¹´å­—èŠ‚è·³åŠ¨ä¼˜ç§€å‘˜å·¥</li>
                                <li contenteditable="true">2020å¹´æ¸…åå¤§å­¦ä¼˜ç§€æ¯•ä¸šç”Ÿ</li>
                            </ul>
                        </section>

                        <section id="ai-tips">
                            <h2>AIä¼˜åŒ–æç¤º</h2>
                            <div class="ai-tips">
                                <ul>
                                    <li>æ•™è‚²ç»å†å·²æ·»åŠ ï¼š<strong>åŒ—äº¬å¤§å­¦ï¼ˆæœ¬ç§‘ï¼‰ã€æ¸…åå¤§å­¦ï¼ˆç¡•å£«ï¼‰</strong></li>
                                    <li>æ•™è‚²èƒŒæ™¯<strong>å®Œæ•´ä¸”çªå‡º</strong>ï¼Œç¬¦åˆä¸“ä¸šå²—ä½è¦æ±‚</li>
                                    <li>å…³é”®è¯å·²åŒ…å«ï¼š<strong>ç”¨æˆ·å¢é•¿ã€è½¬åŒ–ç‡æå‡ã€ABå®éªŒã€GMVã€ç•™å­˜ç‡</strong></li>
                                    <li>é‡åŒ–æˆæœå æ¯”ï¼š<strong>92%</strong>çš„å·¥ä½œç»å†å«å…·ä½“æ•°æ®</li>
                                    <li>å»ºè®®æŠ•é€’æ—¶å¢åŠ ï¼š<strong>"å•†ä¸šåŒ–å˜ç°"ã€"ç§åŸŸè¿è¥"</strong>ç­‰å²—ä½ç›¸å…³æœ¯è¯­</li>
                                    <li>AIæç¤ºå†…å®¹<strong>ä¸ä¼š</strong>å‡ºç°åœ¨æœ€ç»ˆå¯¼å‡ºçš„ç®€å†ä¸­</li>
                                </ul>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
            
            <div class="page-indicators">
                <div class="page-indicator-btn active" data-page="1"></div>
                <div class="page-indicator-btn" data-page="2"></div>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">æ“ä½œæˆåŠŸ!</span>
    </div>
    
    <input type="file" id="fileInput" accept=".json" style="display: none;">
    
    <script>
        // åˆå§‹åŒ–å˜é‡
        const { jsPDF } = window.jspdf;
        
        // DOMå…ƒç´ 
        const photoUpload = document.getElementById('photoUpload');
        const uploadPhotoBtn = document.getElementById('uploadPhotoBtn');
        const photoPreview = document.getElementById('photoPreview');
        const changePhotoBtn = document.getElementById('changePhotoBtn');
        const removePhotoBtn = document.getElementById('removePhotoBtn');
        const showPhotoCheckbox = document.getElementById('showPhoto');
        const showAiTipsCheckbox = document.getElementById('showAiTips');
        const aiTipsSection = document.getElementById('ai-tips');
        const pdfTypeSelect = document.getElementById('pdfType');
        const photoQualitySelect = document.getElementById('photoQuality');
        const pageIndicatorBtns = document.querySelectorAll('.page-indicator-btn');
        const pages = document.querySelectorAll('.resume-page');
        
        // ç…§ç‰‡ä¸Šä¼ åŠŸèƒ½
        uploadPhotoBtn.addEventListener('click', () => photoUpload.click());
        changePhotoBtn.addEventListener('click', () => photoUpload.click());
        
        photoUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                // æ£€æŸ¥æ–‡ä»¶å¤§å°
                if (file.size > 2 * 1024 * 1024) { // 2MB
                    showNotification('ç…§ç‰‡æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é€‰æ‹©å°äº2MBçš„å›¾ç‰‡');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    photoPreview.style.backgroundImage = `url(${event.target.result})`;
                    photoPreview.innerHTML = '';
                    showPhotoCheckbox.checked = true;
                    saveToLocalStorage();
                    showNotification('ç…§ç‰‡ä¸Šä¼ æˆåŠŸ');
                };
                reader.readAsDataURL(file);
            }
        });
        
        // ç§»é™¤ç…§ç‰‡
        removePhotoBtn.addEventListener('click', function() {
            photoPreview.style.backgroundImage = '';
            photoPreview.innerHTML = `
                <div class="photo-placeholder">
                    <i class="fas fa-user-circle"></i>
                    <p>ç‚¹å‡»ä¸Šä¼ ç…§ç‰‡</p>
                </div>
            `;
            showPhotoCheckbox.checked = false;
            saveToLocalStorage();
            showNotification('ç…§ç‰‡å·²ç§»é™¤');
        });
        
        // æ˜¾ç¤º/éšè—ç…§ç‰‡
        showPhotoCheckbox.addEventListener('change', function() {
            const photoContainer = document.getElementById('photoContainer');
            photoContainer.style.display = this.checked ? 'flex' : 'none';
            saveToLocalStorage();
        });
        
        // æ˜¾ç¤º/éšè—AIæç¤º
        showAiTipsCheckbox.addEventListener('change', function() {
            aiTipsSection.style.display = this.checked ? 'block' : 'none';
            saveToLocalStorage();
        });
        
        // é¡µé¢å¯¼èˆª
        pageIndicatorBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const pageNum = this.dataset.page;
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                pageIndicatorBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // æ»šåŠ¨åˆ°å¯¹åº”é¡µé¢
                document.getElementById(`page${pageNum}`).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.body.setAttribute('data-theme', this.dataset.theme);
                saveToLocalStorage();
            });
        });
        
        // é¢œè‰²é€‰æ‹©åŠŸèƒ½
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                document.documentElement.style.setProperty('--primary-color', this.dataset.color);
                saveToLocalStorage();
            });
        });
        
        // æ·»åŠ æ•™è‚²ç»å†
        document.getElementById('addEducation').addEventListener('click', function() {
            const educationSection = document.getElementById('education');
            const newEducation = document.createElement('div');
            newEducation.className = 'education-item';
            newEducation.innerHTML = `
                <button class="delete-btn">Ã—</button>
                <div class="edu-header">
                    <div class="school-name" contenteditable="true">æ–°å­¦æ ¡åç§°</div>
                    <div class="edu-date" contenteditable="true">YYYYå¹´MMæœˆ - YYYYå¹´MMæœˆ</div>
                </div>
                <div class="degree-row">
                    <div class="degree-type">
                        <i class="fas fa-graduation-cap"></i>
                        <select class="degree-type-select">
                            <option>æœ¬ç§‘</option>
                            <option>ç¡•å£«</option>
                            <option>åšå£«</option>
                        </select>
                    </div>
                    <div class="degree" contenteditable="true">å­¦ä½ | ä¸“ä¸š</div>
                    <div class="gpa">
                        <span>GPA:</span>
                        <input type="text" value="0.0/4.0">
                    </div>
                </div>
                <ul>
                    <li contenteditable="true">ä¸»ä¿®è¯¾ç¨‹ï¼šç›¸å…³è¯¾ç¨‹1ã€ç›¸å…³è¯¾ç¨‹2</li>
                    <li contenteditable="true">è£èª‰ï¼šå¥–å­¦é‡‘ã€ç«èµ›å¥–é¡¹ç­‰</li>
                </ul>
            `;
            educationSection.appendChild(newEducation);
            attachDeleteEvent(newEducation.querySelector('.delete-btn'));
            saveToLocalStorage();
            showNotification('å·²æ·»åŠ æ–°çš„æ•™è‚²ç»å†');
        });
        
        // æ·»åŠ å·¥ä½œç»å†
        document.getElementById('addExperience').addEventListener('click', function() {
            const experienceSection = document.getElementById('experience');
            const newExperience = document.createElement('div');
            newExperience.className = 'experience-item';
            newExperience.innerHTML = `
                <button class="delete-btn">Ã—</button>
                <div class="item-header">
                    <div class="company" contenteditable="true">æ–°å…¬å¸åç§°</div>
                    <div class="date" contenteditable="true">YYYYå¹´MMæœˆ - YYYYå¹´MMæœˆ</div>
                </div>
                <div class="position" contenteditable="true">èŒä½åç§°</div>
                <ul>
                    <li contenteditable="true">åœ¨æ­¤æè¿°æ‚¨çš„æˆå°±ï¼Œå°½é‡åŒ…å«é‡åŒ–æ•°æ®ï¼Œå¦‚<span class="highlight">æå‡æ•ˆç‡30%</span></li>
                    <li contenteditable="true">ç¬¬äºŒé¡¹æˆå°±æè¿°...</li>
                </ul>
            `;
            experienceSection.appendChild(newExperience);
            attachDeleteEvent(newExperience.querySelector('.delete-btn'));
            saveToLocalStorage();
            showNotification('å·²æ·»åŠ æ–°çš„å·¥ä½œç»å†');
        });
        
        // æ·»åŠ é¡¹ç›®
        document.getElementById('addProject').addEventListener('click', function() {
            const projectSection = document.getElementById('projects');
            const newProject = document.createElement('div');
            newProject.className = 'project-item';
            newProject.innerHTML = `
                <button class="delete-btn">Ã—</button>
                <div class="item-header">
                    <div class="project-name" contenteditable="true">æ–°é¡¹ç›®åç§°</div>
                    <div class="date" contenteditable="true">YYYYå¹´MMæœˆ - YYYYå¹´MMæœˆ</div>
                </div>
                <ul>
                    <li contenteditable="true">åœ¨æ­¤æè¿°é¡¹ç›®æˆæœï¼Œå°½é‡åŒ…å«é‡åŒ–æ•°æ®ï¼Œå¦‚<span class="highlight">æå‡æ•ˆç‡30%</span></li>
                    <li contenteditable="true">ç¬¬äºŒé¡¹æˆæœæè¿°...</li>
                </ul>
            `;
            projectSection.appendChild(newProject);
            attachDeleteEvent(newProject.querySelector('.delete-btn'));
            saveToLocalStorage();
            showNotification('å·²æ·»åŠ æ–°çš„é¡¹ç›®');
        });
        
        // æ·»åŠ æŠ€èƒ½
        document.getElementById('addSkill').addEventListener('click', function() {
            const skillsContainer = document.querySelector('.skills-container');
            const newSkill = document.createElement('div');
            newSkill.className = 'skill-tag';
            newSkill.contentEditable = true;
            newSkill.textContent = 'æ–°æŠ€èƒ½';
            skillsContainer.appendChild(newSkill);
            saveToLocalStorage();
            showNotification('å·²æ·»åŠ æ–°æŠ€èƒ½');
        });
        
        // åˆ é™¤åŠŸèƒ½
        function attachDeleteEvent(btn) {
            btn.addEventListener('click', function() {
                this.parentElement.remove();
                saveToLocalStorage();
                showNotification('å·²åˆ é™¤é¡¹ç›®');
            });
        }
        
        // åˆå§‹åŒ–åˆ é™¤æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.delete-btn').forEach(btn => {
            attachDeleteEvent(btn);
        });
        
        // å¯¼å‡ºPDFåŠŸèƒ½
        document.getElementById('exportPdf').addEventListener('click', function() {
            const pdfType = pdfTypeSelect.value;
            const photoQuality = photoQualitySelect.value;
            
            if (pdfType === 'text') {
                exportTextPDF();
            } else {
                exportImagePDF(photoQuality);
            }
        });
        
        // å¯¼å‡ºæ–‡æœ¬å‹PDF
        function exportTextPDF() {
            showNotification('æ­£åœ¨ç”Ÿæˆæ–‡æœ¬å‹PDF...');
            
            // éšè—æ§åˆ¶æŒ‰é’®å’ŒAIæç¤º
            document.querySelectorAll('.add-btn, .delete-btn').forEach(btn => {
                btn.style.visibility = 'hidden';
            });
            const aiTipsOriginalDisplay = aiTipsSection.style.display;
            aiTipsSection.style.display = 'none';
            
            // åˆ›å»ºPDFå¯¹è±¡
            const pdf = new jsPDF('p', 'mm', 'a4');
            
            // æ·»åŠ ä¸­æ–‡å­—ä½“æ”¯æŒ
            pdf.addFont('ArialUnicodeMS', 'Arial', 'normal');
            pdf.setFont('Arial');
            
            const pageWidth = pdf.internal.pageSize.getWidth();
            const margin = 15;
            let cursorY = margin;
            
            // æ·»åŠ å§“åå’ŒèŒä½
            const name = document.querySelector('h1').textContent;
            const jobTitle = document.querySelector('.job-title').textContent;
            
            pdf.setFontSize(20);
            pdf.setFont(undefined, 'bold');
            pdf.text(name, pageWidth/2, cursorY, { align: 'center' });
            cursorY += 10;
            
            pdf.setFontSize(16);
            pdf.setFont(undefined, 'normal');
            pdf.text(jobTitle, pageWidth/2, cursorY, { align: 'center' });
            cursorY += 15;
            
            // æ·»åŠ è”ç³»ä¿¡æ¯
            const contactItems = document.querySelectorAll('.contact-item');
            let contactText = '';
            contactItems.forEach((item, index) => {
                contactText += item.textContent.trim();
                if (index < contactItems.length - 1) contactText += ' | ';
            });
            
            pdf.setFontSize(10);
            pdf.text(contactText, pageWidth/2, cursorY, { align: 'center' });
            cursorY += 15;
            
            // æ·»åŠ æ‘˜è¦
            const summary = document.querySelector('.summary').textContent;
            pdf.setFontSize(12);
            pdf.setFont(undefined, 'bold');
            pdf.text('èŒä¸šæ‘˜è¦', margin, cursorY);
            cursorY += 8;
            
            pdf.setFontSize(11);
            pdf.setFont(undefined, 'normal');
            const splitSummary = pdf.splitTextToSize(summary, pageWidth - margin * 2);
            splitSummary.forEach(text => {
                if (cursorY > 280) {
                    pdf.addPage();
                    cursorY = margin;
                }
                pdf.text(text, margin, cursorY);
                cursorY += 7;
            });
            cursorY += 10;
            
            // æ·»åŠ æ•™è‚²ç»å†
            pdf.setFontSize(12);
            pdf.setFont(undefined, 'bold');
            pdf.text('æ•™è‚²ç»å†', margin, cursorY);
            cursorY += 8;
            
            const educations = document.querySelectorAll('.education-item');
            educations.forEach(edu => {
                const school = edu.querySelector('.school-name').textContent;
                const date = edu.querySelector('.edu-date').textContent;
                const degree = edu.querySelector('.degree').textContent;
                const items = edu.querySelectorAll('li');
                
                pdf.setFontSize(11);
                pdf.setFont(undefined, 'bold');
                pdf.text(school, margin, cursorY);
                
                pdf.setFont(undefined, 'normal');
                pdf.text(date, pageWidth - margin, cursorY, { align: 'right' });
                cursorY += 5;
                
                pdf.setFontSize(10);
                pdf.setFont(undefined, 'italic');
                pdf.text(degree, margin, cursorY);
                cursorY += 5;
                
                pdf.setFontSize(10);
                pdf.setFont(undefined, 'normal');
                items.forEach(item => {
                    const itemText = 'â€¢ ' + item.textContent.replace('â€¢', '').trim();
                    const splitItem = pdf.splitTextToSize(itemText, pageWidth - margin * 2);
                    
                    splitItem.forEach(text => {
                        if (cursorY > 280) {
                            pdf.addPage();
                            cursorY = margin;
                        }
                        pdf.text(text, margin + 5, cursorY);
                        cursorY += 5;
                    });
                    cursorY += 2;
                });
                
                cursorY += 5;
            });
            
            // ä¿å­˜æ–‡ä»¶
            pdf.save('ä¸ªäººç®€å†-æ–‡æœ¬ç‰ˆ.pdf');
            
            // æ¢å¤æŒ‰é’®å’ŒAIæç¤º
            document.querySelectorAll('.add-btn, .delete-btn').forEach(btn => {
                btn.style.visibility = 'visible';
            });
            aiTipsSection.style.display = aiTipsOriginalDisplay;
            
            showNotification('æ–‡æœ¬å‹PDFå¯¼å‡ºæˆåŠŸï¼æ–‡ä»¶å¤§å°çº¦200KB');
        }
        
        // å¯¼å‡ºå›¾åƒå‹PDFï¼ˆæ”¯æŒå¤šé¡µï¼‰
        function exportImagePDF(quality) {
            showNotification('æ­£åœ¨ç”Ÿæˆå›¾åƒå‹PDF...');
            
            // è®¾ç½®å›¾ç‰‡è´¨é‡
            let scale = 1.5;
            let imageQuality = 0.9;
            
            if (quality === 'low') {
                scale = 1.0;
                imageQuality = 0.7;
            } else if (quality === 'high') {
                scale = 2.0;
                imageQuality = 0.95;
            }
            
            // éšè—æ§åˆ¶æŒ‰é’®å’ŒAIæç¤º
            document.querySelectorAll('.add-btn, .delete-btn').forEach(btn => {
                btn.style.visibility = 'hidden';
            });
            const aiTipsOriginalDisplay = aiTipsSection.style.display;
            aiTipsSection.style.display = 'none';
            
            const pdf = new jsPDF('p', 'mm', 'a4');
            const promises = [];
            
            // å¤„ç†æ¯ä¸€é¡µ
            pages.forEach((page, index) => {
                promises.push(new Promise((resolve) => {
                    html2canvas(page, {
                        scale: scale,
                        useCORS: true,
                        logging: false,
                        backgroundColor: getComputedStyle(page).backgroundColor
                    }).then(canvas => {
                        const imgData = canvas.toDataURL('image/jpeg', imageQuality);
                        const imgWidth = 210; // A4çº¸å®½åº¦
                        const imgHeight = canvas.height * imgWidth / canvas.width;
                        
                        if (index > 0) {
                            pdf.addPage();
                        }
                        
                        // è®¡ç®—å‚ç›´å±…ä¸­ä½ç½®
                        const pageHeight = pdf.internal.pageSize.getHeight();
                        const yPos = (pageHeight - imgHeight) / 2;
                        
                        pdf.addImage(imgData, 'JPEG', 0, yPos, imgWidth, imgHeight);
                        resolve();
                    });
                }));
            });
            
            // æ‰€æœ‰é¡µé¢å¤„ç†å®Œæˆåä¿å­˜PDF
            Promise.all(promises).then(() => {
                // ä¿å­˜æ–‡ä»¶
                pdf.save('ä¸ªäººç®€å†-å›¾åƒç‰ˆ.pdf');
                
                // æ¢å¤æŒ‰é’®å’ŒAIæç¤º
                document.querySelectorAll('.add-btn, .delete-btn').forEach(btn => {
                    btn.style.visibility = 'visible';
                });
                aiTipsSection.style.display = aiTipsOriginalDisplay;
                
                showNotification('å›¾åƒå‹PDFå¯¼å‡ºæˆåŠŸï¼æ”¯æŒå¤šé¡µ');
            });
        }
        
        // æœ¬åœ°ä¿å­˜åŠŸèƒ½
        function saveToLocalStorage() {
            const resumeContent = document.getElementById('resumeContent').innerHTML;
            const color = getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();
            const theme = document.body.getAttribute('data-theme') || 'light';
            const showPhoto = document.getElementById('showPhoto').checked;
            const showAiTips = document.getElementById('showAiTips').checked;
            const photoPreviewStyle = photoPreview.style.backgroundImage;
            
            const resumeData = {
                content: resumeContent,
                color: color,
                theme: theme,
                showPhoto: showPhoto,
                showAiTips: showAiTips,
                photoPreview: photoPreviewStyle
            };
            
            localStorage.setItem('resumeData', JSON.stringify(resumeData));
        }
        
        // è‡ªåŠ¨ä¿å­˜
        document.addEventListener('input', function() {
            saveToLocalStorage();
        });
        
        // åŠ è½½æœ¬åœ°å­˜å‚¨
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('resumeData');
            if (savedData) {
                const data = JSON.parse(savedData);
                document.getElementById('resumeContent').innerHTML = data.content;
                document.documentElement.style.setProperty('--primary-color', data.color);
                document.body.setAttribute('data-theme', data.theme);
                document.getElementById('showPhoto').checked = data.showPhoto;
                document.getElementById('showAiTips').checked = data.showAiTips;
                photoPreview.style.backgroundImage = data.photoPreview;
                
                if (data.photoPreview) {
                    photoPreview.innerHTML = '';
                }
                
                document.getElementById('photoContainer').style.display = data.showPhoto ? 'flex' : 'none';
                aiTipsSection.style.display = data.showAiTips ? 'block' : 'none';
                
                // æ›´æ–°UIçŠ¶æ€
                document.querySelectorAll('.color-option').forEach(option => {
                    option.classList.toggle('active', option.dataset.color === data.color);
                });
                
                document.querySelectorAll('.theme-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.theme === data.theme);
                });
                
                // é‡æ–°ç»‘å®šåˆ é™¤äº‹ä»¶
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    attachDeleteEvent(btn);
                });
                
                showNotification('å·²åŠ è½½æœ¬åœ°ä¿å­˜çš„ç®€å†');
            }
        }
        
        // æ‰‹åŠ¨ä¿å­˜åˆ°æœ¬åœ°
        document.getElementById('saveLocal').addEventListener('click', function() {
            saveToLocalStorage();
            showNotification('ç®€å†å·²ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨');
        });
        
        // ä»æœ¬åœ°åŠ è½½
        document.getElementById('loadLocal').addEventListener('click', function() {
            document.getElementById('fileInput').click();
        });
        
        // æ–‡ä»¶å¯¼å…¥åŠŸèƒ½
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                try {
                    const data = JSON.parse(event.target.result);
                    document.getElementById('resumeContent').innerHTML = data.content;
                    document.documentElement.style.setProperty('--primary-color', data.color);
                    document.body.setAttribute('data-theme', data.theme);
                    document.getElementById('showPhoto').checked = data.showPhoto;
                    document.getElementById('showAiTips').checked = data.showAiTips;
                    photoPreview.style.backgroundImage = data.photoPreview;
                    
                    if (data.photoPreview) {
                        photoPreview.innerHTML = '';
                    }
                    
                    document.getElementById('photoContainer').style.display = data.showPhoto ? 'flex' : 'none';
                    aiTipsSection.style.display = data.showAiTips ? 'block' : 'none';
                    
                    // æ›´æ–°UIçŠ¶æ€
                    document.querySelectorAll('.color-option').forEach(option => {
                        option.classList.toggle('active', option.dataset.color === data.color);
                    });
                    
                    document.querySelectorAll('.theme-btn').forEach(btn => {
                        btn.classList.toggle('active', btn.dataset.theme === data.theme);
                    });
                    
                    // é‡æ–°ç»‘å®šåˆ é™¤äº‹ä»¶
                    document.querySelectorAll('.delete-btn').forEach(btn => {
                        attachDeleteEvent(btn);
                    });
                    
                    showNotification('ç®€å†å¯¼å…¥æˆåŠŸï¼');
                } catch (error) {
                    showNotification('æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œå¯¼å…¥å¤±è´¥');
                    console.error(error);
                }
            };
            reader.readAsText(file);
        });
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(text) {
            const notification = document.getElementById('notification');
            const textElement = document.getElementById('notificationText');
            
            textElement.textContent = text;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // åˆå§‹åŒ–åŠ è½½
        window.addEventListener('DOMContentLoaded', function() {
            loadFromLocalStorage();
            
            // é«˜äº®é‡åŒ–æ•°æ®
            document.querySelectorAll('li').forEach(li => {
                li.innerHTML = li.innerHTML.replace(/(\d+%|\d+ä¸‡|\d+\.\d+äº¿|\d+ä¸‡)/g, 
                    '<span style="color:var(--primary-color);font-weight:bold">$1</span>'
                );
            });
            
            // åˆå§‹åŒ–é¡µé¢æŒ‡ç¤ºå™¨
            pageIndicatorBtns[0].click();
        });
    </script>
</body>
</html>